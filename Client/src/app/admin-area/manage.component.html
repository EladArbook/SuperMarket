<div id="manageDiv">

    <!-- Edit -->
    <div id="firstDiv" *ngIf="!editAddTgl">
        <div id="editHeader">
            <h4>Edit Product</h4>
            <i class="fa fa-plus" style="font-size:24px" id="addProductBtn" (click)="addProduct()"
                title="Add Product"></i>
        </div>
        <hr>

        <div *ngIf="editThisProduct">
            <input type="text" placeholder="Product Name" [(ngModel)]="editThisProduct.name">
            <br> <!----> <br>
            <select id="categorySelect" [(ngModel)]="addCategory" [(ngModel)]="editThisProduct.category_id">
                <option value="0">Product Category</option>
                <option value="1">Bakery</option>
                <option value="2">Beverages</option>
                <option value="3">Dairy</option>
                <option value="4">Frozen</option>
                <option value="5">Fruits & Vegs</option>
                <option value="6">Household</option>
                <option value="7">Meat & Fish</option>
                <option value="8">Pet</option>
            </select>
            <br> <!----> <br>
            <input type="number" placeholder="Product Price" [(ngModel)]="editThisProduct.price">&nbsp;$
            <br> <!----> <br>

            <!--  -->
            <!-- input type="file" id="addImg" class="hidden" placeholder="img">
            <label for="addImg" class="fileUpload">Select Image</label> -->
            <!--  -->

            <input #imageInput type="file" accept="image/*" (change)="processFile($event)" id="addImg" class="hidden">
            <label for="addImg" class="fileUpload">Product Image</label>
            <span *ngIf="addImg">
                {{addImg.name}}
            </span>

            <br>
            <span style="font-size: 60%;">*Don't select image to keep old image</span>
            <br>
            <span *ngIf="productError" class="errorSpn">{{productError}}</span>
            <span *ngIf="successMsg" class="successSpn">{{successMsg}}</span>
            <br>
            <button class="cancelBtn" (click)="cancelEdit()">Cancel</button>
            &nbsp;
            <button class="approveBtn" (click)="saveEdited()">Save</button>
        </div>

        <div *ngIf="!editThisProduct">
            Select a product to edit.
        </div>

    </div>

    <!-- Add -->
    <div id="firstDiv" *ngIf="editAddTgl">
        <h4>Add Product</h4>
        <hr>

        <input type="text" placeholder="Product Name" [(ngModel)]="addName">
        <br><br>
        <select id="categorySelect" [(ngModel)]="addCategory">
            <option value="0">Product Category</option>
            <option value="1">Bakery</option>
            <option value="2">Beverages</option>
            <option value="3">Dairy</option>
            <option value="4">Frozen</option>
            <option value="5">Fruits & Vegs</option>
            <option value="6">Household</option>
            <option value="7">Meat & Fish</option>
            <option value="8">Pet</option>
        </select>
        <br><br>
        <input type="number" placeholder="Product Price" [(ngModel)]="addPrice">&nbsp;$
        <br><br>
        <!--  -->


        <input #imageInput type="file" accept="image/*" (change)="processFile($event)" id="addImg" class="hidden">
        <label for="addImg" class="fileUpload">Product Image</label>
        <span *ngIf="addImg">
            {{addImg.name}}
        </span>

        <br><br>
        <span *ngIf="productError" class="errorSpn">{{productError}}</span>
        <span *ngIf="successMsg" class="successSpn">{{successMsg}}</span>
        <br>

        <button class="cancelBtn" (click)="cancelEdit()">Cancel</button>
        &nbsp;
        <button class="approveBtn" (click)="saveAdded()">Add</button>

    </div>

<!--  [ngClass]="{searchedWord: searchWord && product.name.toLowerCase().includes(searchWord)}"> -->
    <div id="secondDiv">
        <div id="categories">
            <button [ngClass]="{selectedCategory: category === 1}" (click)="categoryChange(1)">Bakery</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 2}" (click)="categoryChange(2)">Beverages</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 3}" (click)="categoryChange(3)">Dairy</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 4}" (click)="categoryChange(4)">Frozen</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 5}" (click)="categoryChange(5)">Fruits & Vegs</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 6}" (click)="categoryChange(6)">Household</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 7}" (click)="categoryChange(7)">Meat & Fish</button>
            &nbsp;|&nbsp;
            <button [ngClass]="{selectedCategory: category === 8}" (click)="categoryChange(8)">Pet</button>
        </div>

        <div id="productShelf">
            <div *ngIf="productList.length <= 0" id="noProducts">No products found in that category.</div>
            <div *ngFor="let product of productList" (click)="editProduct(product)" class="productView">
                <span>{{product.name}}</span>
                <br>
                <div class="imgDiv">

                    <img *ngIf="product.image" src="http://localhost:3800/user/images/{{product.image}}"
                        alt="{{product.name}}" width="80px" height="80px" />

                    <img *ngIf="!product.image" src='../../../assets/supermarket.jpg' alt={{product.name}} height="80px"
                        width="80px">
                </div>
                <br>
                <!-- <span>{{product.price}} $</span> -->
                <span>{{product.price}} $</span>
                <br>
            </div>
        </div>

    </div>